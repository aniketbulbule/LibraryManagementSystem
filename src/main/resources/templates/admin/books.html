<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="layout :: content">
<body>
  <h2>Manage Books</h2>

  <form th:action="@{/admin/books}" method="post" th:object="${book}" enctype="multipart/form-data">
    <input th:field="*{title}" placeholder="Title">
    <input th:field="*{author}" placeholder="Author">
    <input th:field="*{isbn}" placeholder="ISBN">
    <input th:field="*{totalCopies}" type="number" min="1" placeholder="Total">
    <input type="file" name="imageFile" accept="image/*">
    <button type="submit">Add</button>
  </form>

  <table>
    <tr><th>Image</th><th>Title</th><th>Author</th><th>ISBN</th><th>Total</th><th>Avail</th><th>Actions</th></tr>
    <tr th:each="b : ${books}">
      <td><img th:if="${b.imagePath}" th:src="${b.imagePath}" alt="cover" style="height:50px;"></td>
      <td th:text="${b.title}"></td>
      <td th:text="${b.author}"></td>
      <td th:text="${b.isbn}"></td>
      <td th:text="${b.totalCopies}"></td>
      <td th:text="${b.availableCopies}"></td>
      <td>
        <form th:action="@{'/admin/books/' + ${b.id} + '/delete'}" method="post">
          <button type="submit">Delete</button>
        </form>
      </td>
    </tr>
  </table>
</body>
</html>
